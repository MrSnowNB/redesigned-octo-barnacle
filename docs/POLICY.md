---
title: Alice Avatar RICo Layer - Project Policy
version: 1.0
audience: agent, human maintainer, reviewer
status: living
---

# PROJECT POLICY

## Overview

All source/project files must be markdown with YAML frontmatter or pure YAML.

Each agent-driven task is atomic, fully testable, and blocked by validation gates. All failures or uncertainties must update living docs before halting for human input.

---

## LIFECYCLE

- **Plan**
- **Build**
- **Validate**
- **Review**
- **Release**

> Progresses strictly sequentially. No concurrent/lazy stages.

---

## VALIDATION GATES

Each gate MUST be green before moving to the next:

- **unit:** `pytest -q` must pass (no fails, all green)
- **lint:** `ruff` and/or `flake8` must be clean (no warnings/errors)
- **type:** `mypy` or `pyright` must be clean (no annotation/type errors)
- **docs:** spec drift check passes (autogenerated/spec files match intent)
- **manual:** when required, pass explicit gating review; human must sign off

---

## FAILURE HANDLING

**On any task failure or agent uncertainty:**

1. Capture all relevant logs, error messages, stack traces.
2. Append a new entry to both:
   - `TROUBLESHOOTING.md` (see below structure)
   - `REPLICATION-NOTES.md` (see below structure)
3. Open or update issue in `ISSUE.md` (formatted for human triage).
4. Halt further agent actions and flag for human attention.
5. Await further human input before retry.

---

## TROUBLESHOOTING (`TROUBLESHOOTING.md`)

Each issue entry MUST include, at minimum:

- **Context** (Module, attempted task, input conditions)
- **Symptom** (Observed misbehavior, failed assertion, etc.)
- **Error Snippet** (First/most relevant error stack trace or message)
- **Probable Cause** (Short assessment)
- **Quick Fix** (Fastest unblocking option, if any)
- **Permanent Fix** (Robust solution if different)
- **Prevention** (Method to avoid on future runs. e.g. add test, pre-check, constraint)

**Seeded entries:**
- Dependency resolution loop → pin indirect deps; use constraints.txt.
- Embedding model OOM → reduce batch, sequence truncation, fp16.
- Socket port conflicts in local orchestrator → randomized port bind with retries.

---

## LIVING DOCUMENTATION (`REPLICATION-NOTES.md`)

- **Each agent/iteration must append:**  
  - Recurring errors/patterns  
  - Flaky tests observed  
  - Environment deltas (OS, package versions, hardware, etc.)  
  - Hardware or external resource notes  
  - "Known Pitfalls to Avoid Next Run"  
  - "Replicable Setup Checklist"

On any halt/failure, always append an entry before awaiting human override.

---

## "Halting" State (Agent/Automation)

- Always halt after error and log **before** retry or escalation.
- If manual intervention needed, *do not self-retry* unless explicit human override given in `ISSUE.md`.
- Document root cause, mitigation attempted, state of all gating artifacts.

---

## LESSONS FROM FAILURE (from last two attempts)

- Never continue past a failed validation/lint/type gate
- Do not "fix and retry" multiple times without documenting every attempt and result in the living docs
- All changes, error states, workarounds, and manual fixes must be recorded for future replication and audit

---

## TEMPLATES

### TROUBLESHOOTING.md

```
***
error_id: <unique-id>
date: <yyyy-mm-dd>
component: <module/script>
context: <short description>
symptom: <actual error/bug>
error_snippet: <stack/output>
probable_cause: <one-line>
quick_fix: <if any>
permanent_fix: <if any>
prevention: <how to stop recurrence>
***
```

### REPLICATION-NOTES.md

```
***
date: <yyyy-mm-dd>
agent: <agent/version/hardware>
environment:
  python: <ver>
  os: <os/version>
  deps: [list]
errors:
  - <error_id> (ref to troubleshooting)
notes:
  - <keep fatal/recurring/slow/flaky>
pitfalls:
  - <text>
replicable_setup:
  - <step/checklist>
***
```

---

## END OF POLICY

All coding agents and maintainers: strict adherence required before running, merging, or accepting any new work!
